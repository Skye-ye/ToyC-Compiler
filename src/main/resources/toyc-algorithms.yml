- description: call graph construction
  algorithmClass: toyc.algorithm.analysis.graph.callgraph.CallGraphBuilder
  id: cg
  modification: false
  options:
    dump: true # whether dump call graph in dot file
    dump-functions: true # whether dump reachable functions
    dump-call-edges: true # whether dump call edges

- description: intraprocedural control-flow graph
  algorithmClass: toyc.algorithm.analysis.graph.cfg.CFGBuilder
  id: cfg
  modification: false
  options:
    dump: true # dump control-flow graph

- description: interprocedural control-flow graph
  algorithmClass: toyc.algorithm.analysis.graph.icfg.ICFGBuilder
  id: icfg
  modification: false
  requires: [ cfg,cg ]
  options:
    dump: true # dump inter-procedural control-flow graph

- description: live variable analysis
  algorithmClass: toyc.algorithm.analysis.dataflow.analysis.LiveVariable
  id: live-var
  modification: false
  requires: [ cfg ]
  options:
    strongly: true # enable strongly live variable analysis

- description: reaching definition analysis
  algorithmClass: toyc.algorithm.analysis.dataflow.analysis.ReachingDefinition
  id: reach-def
  modification: false
  requires: [ cfg ]

- description: constant propagation
  algorithmClass: toyc.algorithm.analysis.dataflow.analysis.constprop.ConstantPropagation
  id: const-prop
  modification: false
  requires: [ cfg ]
  options:
    edge-refine: true # refine lattice value via edge transfer

- description: def-use analysis
  algorithmClass: toyc.algorithm.analysis.defuse.DefUseAnalysis
  id: def-use
  modification: false
  requires: [ reach-def ]
  options:
    compute-defs: true # whether compute definitions of variables
    compute-uses: true # whether compute uses of variables

- description: inter-procedural constant propagation
  algorithmClass: toyc.algorithm.analysis.dataflow.inter.InterConstantPropagation
  id: inter-const-prop
  modification: false
  requires: [ icfg ]
  options:
    edge-refine: true # refine lattice value via edge transfer

- description: dead code detection
  algorithmClass: toyc.algorithm.analysis.deadcode.DeadCodeDetection
  id: dead-code
  modification: false
  requires: [ cfg,inter-const-prop,live-var ]

- description: common subexpression detection
  algorithmClass: toyc.algorithm.analysis.dataflow.analysis.csd.CommonSubexpressionDetection
  id: csd
  modification: false
  requires: [ cfg,const-prop ]
  options:
    dump: true # whether dump CSE results

- description: function inlining detection
  algorithmClass: toyc.algorithm.analysis.inline.FunctionInliningDetection
  id: func-inline
  modification: false
  requires: []

- description: dominator analysis
  algorithmClass: toyc.algorithm.analysis.dataflow.analysis.DominatorAnalysis
  id: dominator
  modification: false
  requires: [ cfg ]

- description: loop detection
  algorithmClass: toyc.algorithm.analysis.loop.LoopDetection
  id: loop-detection
  modification: false
  requires: [ cfg, dominator ]

- description: constant folding
  algorithmClass: toyc.algorithm.optimization.ConstantFolding
  id: const-fold
  modification: true
  requires: [ inter-const-prop ]

- description: dead code elimination
  algorithmClass: toyc.algorithm.optimization.DeadCodeElimination
  id: dead-code-elim
  modification: true
  requires: [ dead-code ]

- description: common subexpression elimination
  algorithmClass: toyc.algorithm.optimization.cse.CommonSubexpressionElimination
  id: cse
  modification: true
  requires: [ csd ]

- description: function inlining
  algorithmClass: toyc.algorithm.optimization.FunctionInlining
  id: func-inline-opt
  modification: true
  requires: [ func-inline ]

- description: loop unrolling
  algorithmClass: toyc.algorithm.optimization.LoopUnrolling
  id: loop-unroll
  modification: true
  requires: [ loop-detection, def-use ]

- description: process results of previously-run analyses
  algorithmClass: toyc.algorithm.analysis.ResultProcessor
  id: process-result
  modification: false
  options:
    analyses: [ dominator, loop-detection, def-use ]
    action: dump # | compare
    file: null
    log-mismatches: false